# ===================================================================
# EMAIL ROUTER - ENVIRONMENT CONFIGURATION TEMPLATE
# ===================================================================
# Copy this file to .env and configure values for your environment
#
# Security Note: Never commit actual .env files to version control
# ===================================================================

# ===================================================================
# CRITICAL SECURITY CONFIGURATION (Required)
# ===================================================================

# JWT Secret Key - CRITICAL: Use strong, unique key in production
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET_KEY=your-jwt-secret-key-must-be-at-least-32-characters

# ===================================================================
# EXTERNAL SERVICE API KEYS (Required for full functionality)
# ===================================================================

# Anthropic Claude API Key - Required for AI email classification
# Get from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-api03-your-anthropic-api-key-here

# Mailgun Email Service - Required for email sending
# Get from: https://app.mailgun.com/
MAILGUN_API_KEY=key-your-mailgun-api-key-here
MAILGUN_DOMAIN=your-domain.com

# Mailgun Webhook Security (Optional but recommended)
# Used to verify webhook signatures from Mailgun
MAILGUN_WEBHOOK_SIGNING_KEY=your-webhook-signing-key

# ===================================================================
# APPLICATION CONFIGURATION (Optional)
# ===================================================================

# Application Environment
# Options: development, staging, production
EMAIL_ROUTER_ENVIRONMENT=development

# Debug Mode (development only)
# Options: true, false
EMAIL_ROUTER_DEBUG=true

# ===================================================================
# DATABASE CONFIGURATION (Optional - defaults to SQLite)
# ===================================================================

# Simple database URL (recommended)
# Examples:
#   SQLite: sqlite:///data/email_router.db
#   PostgreSQL: postgresql://user:pass@localhost/email_router
#   MySQL: mysql://user:pass@localhost/email_router
# DATABASE_URL=sqlite:///data/email_router.db

# Alternative: Individual database components
# DB_TYPE=sqlite
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=email_router
# DB_USER=your_db_user
# DB_PASSWORD=your_db_password

# ===================================================================
# SERVER CONFIGURATION (Optional)
# ===================================================================

# Server host and port
HOST=0.0.0.0
PORT=8080

# Number of worker processes (production)
WORKERS=1

# Logging configuration
LOG_LEVEL=INFO
ACCESS_LOG=true

# ===================================================================
# SECURITY CONFIGURATION (Optional)
# ===================================================================

# JWT Token Configuration
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=30

# Authentication limits
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION_MINUTES=15

# CORS Configuration
ENABLE_CORS=true
ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# Rate Limiting
API_RATE_LIMIT_PER_MINUTE=300
API_BURST_LIMIT=50

# ===================================================================
# AI SERVICE CONFIGURATION (Optional)
# ===================================================================

# Claude Model Selection
# Options: claude-3-5-sonnet-20241022, claude-3-haiku-20240307, etc.
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# AI Processing Timeouts
AI_REQUEST_TIMEOUT_SECONDS=30
AI_MAX_RETRIES=3

# ===================================================================
# EMAIL SERVICE CONFIGURATION (Optional)
# ===================================================================

# Mailgun Configuration
MAILGUN_BASE_URL=https://api.mailgun.net
MAILGUN_TIMEOUT_SECONDS=30

# Email Template Configuration
DEFAULT_FROM_NAME=Email Router
DEFAULT_REPLY_TO=noreply@yourdomain.com

# ===================================================================
# GOOGLE CLOUD CONFIGURATION (Optional)
# ===================================================================

# Google Cloud Project (for deployment)
GOOGLE_CLOUD_PROJECT=your-project-id
GOOGLE_CLOUD_REGION=us-central1

# ===================================================================
# PERFORMANCE & CACHING (Optional)
# ===================================================================

# Cache Configuration
CACHE_ENABLED=true
CACHE_TTL=300
CACHE_MAX_SIZE_MB=128

# Client Configuration Caching
CLIENT_CONFIG_CACHE_TTL=600

# ===================================================================
# MONITORING & OBSERVABILITY (Optional)
# ===================================================================

# Application Performance Monitoring
ENABLE_TRACING=false
ENABLE_PROFILING=false

# Error Tracking (Sentry, etc.)
# ERROR_TRACKING_DSN=https://your-dsn@sentry.io/project

# Metrics and Health Checks
ENABLE_METRICS=true
HEALTH_CHECK_INTERVAL=30

# ===================================================================
# DEVELOPMENT & TESTING (Development only)
# ===================================================================

# Test Configuration
# TEST_DATABASE_URL=sqlite:///test.db
# TEST_JWT_SECRET_KEY=test-jwt-secret-for-testing-only

# Development Tools
# ENABLE_RELOAD=true
# ENABLE_DEBUGGER=false

# ===================================================================
# CLIENT CONFIGURATION (Optional)
# ===================================================================

# Client Configuration Path
CLIENT_CONFIG_PATH=clients/active

# Default Client Settings
DEFAULT_RESPONSE_TIME_MINUTES=15
DEFAULT_ESCALATION_ENABLED=true

# ===================================================================
# ADVANCED CONFIGURATION (Optional)
# ===================================================================

# Session Management
SESSION_TIMEOUT_MINUTES=60
MAX_CONCURRENT_SESSIONS=5

# Request Validation
MAX_REQUEST_SIZE_MB=10
MAX_EMAIL_SIZE_MB=25

# Webhook Configuration
WEBHOOK_TIMEOUT_SECONDS=10
WEBHOOK_MAX_RETRIES=3

# ===================================================================
# EXAMPLE VALUES FOR DEVELOPMENT
# ===================================================================
# Uncomment and modify these for local development:
#
# JWT_SECRET_KEY=dev-secret-key-change-in-production-minimum-32-chars
# ANTHROPIC_API_KEY=sk-ant-api03-your-development-key
# MAILGUN_API_KEY=key-your-development-mailgun-key
# MAILGUN_DOMAIN=sandbox123.mailgun.org
# EMAIL_ROUTER_ENVIRONMENT=development
# EMAIL_ROUTER_DEBUG=true
# LOG_LEVEL=DEBUG
#
# ===================================================================

# ===================================================================
# SECURITY CHECKLIST FOR PRODUCTION
# ===================================================================
#
# Before deploying to production, ensure:
#
# ✅ JWT_SECRET_KEY is strong (32+ characters, randomly generated)
# ✅ ANTHROPIC_API_KEY is production key with appropriate limits
# ✅ MAILGUN_API_KEY is production key with sending limits
# ✅ MAILGUN_WEBHOOK_SIGNING_KEY is configured for security
# ✅ EMAIL_ROUTER_ENVIRONMENT=production
# ✅ EMAIL_ROUTER_DEBUG=false
# ✅ DATABASE_URL points to production database
# ✅ ALLOWED_ORIGINS restricted to your domains only
# ✅ LOG_LEVEL=INFO or WARNING (not DEBUG)
# ✅ All optional security features enabled
# ✅ Regular backup and monitoring configured
#
# ===================================================================
